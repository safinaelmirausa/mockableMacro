# üìò MockableMacro

## 1. –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

`MockableMacro` ‚Äî —ç—Ç–æ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π Swift-–ø–ª–∞–≥–∏–Ω, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (mock-–æ–±—ä–µ–∫—Ç–æ–≤)** –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –º–æ–¥–µ–ª–∏.

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤:

* unit-—Ç–µ—Å—Ç–∞—Ö
* SwiftUI Preview
* UI-–¥–µ–º–æ
* snapshot- –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–∞—Ö

–ü–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ –ø–æ–ª—É—á–∞—Ç—å –≤–∞–ª–∏–¥–Ω—ã–µ —Ñ–∏–∫—Ç–∏–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ **–±–µ–∑ —Ä—É—á–Ω–æ–≥–æ boilerplate-–∫–æ–¥–∞**.

---

## 2. –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

–ú–∞–∫—Ä–æ—Å `@Mockable` –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—Å–µ —Ö—Ä–∞–Ω–∏–º—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ (`var`) —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏–ª–∏ –∫–ª–∞—Å—Å–∞ –∏ **–Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏** –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ —Ç–∏–ø —Å–ª–µ–¥—É—é—â–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã:

| –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —á–ª–µ–Ω      | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                           |
| ------------------------- | ------------------------------------ |
| `init(_mockIndex:)`       | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ç–æ—Ä —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ |
| `static func mock()`      | –°–æ–∑–¥–∞–Ω–∏–µ –æ–¥–Ω–æ–≥–æ mock-—ç–∫–∑–µ–º–ø–ª—è—Ä–∞      |
| `static func mockArray()` | –°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ mock-—ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤    |

–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π **–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∞** –∏ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–ø–∞ —Å–≤–æ–π—Å—Ç–≤–∞:

* `String` ‚Üí `"PropertyName_1"`
* `Int`, `Double` ‚Üí –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–Ω–¥–µ–∫—Å–∞
* `Bool` ‚Üí —á–µ—Ä–µ–¥–æ–≤–∞–Ω–∏–µ `true / false`
* `Date`, `UUID`, `URL`, `Data` ‚Üí —Ä–µ–∞–ª—å–Ω—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã
* –í–ª–æ–∂–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ (`@Mockable`) ‚Üí —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ —á–µ—Ä–µ–∑ `.mock()`
* `Optional<T>` ‚Üí `nil`

---

## 3. –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä

```swift
import MockableClient

@Mockable
struct Car {
    var id: Int
    var brand: String
    var isElectric: Bool
}
```

–ü–æ—Å–ª–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ:

```swift
Car.mock()
Car.mockArray(5)
```

---

## 4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ SwiftUI Preview

```swift
let mockArray = Car.mockArray(3) üî¶<---- –ó–∞ –ø—Ä–µ–≤—å—é!
struct CarListView_Previews: PreviewProvider {
    static var previews: some View {
        List(mockArray) { car in
            Text(car.brand)
        }
    }
}
```

---

## 5. –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (`@Mask`)

–î–ª—è —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö —Å–≤–æ–π—Å—Ç–≤, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö **—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –∏–ª–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**
(–∫–∞—Ä—Ç—ã, —Ç–µ–ª–µ—Ñ–æ–Ω—ã, –¥–æ–∫—É–º–µ–Ω—Ç—ã), –¥–æ—Å—Ç—É–ø–µ–Ω –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –º–∞–∫—Ä–æ—Å `@Mask`.

`@Mask` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–≤–º–µ—Å—Ç–µ —Å `@Mockable`** –∏ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∑–Ω–∞—á–µ–Ω–∏—è.

```swift
@Mockable
struct User {
    @Mask(.cardNumber)
    var card: String

    @Mask(.phoneUZ)
    var phone: String

    @Mask(.pattern("AAA XX"))
    var code: String
}
```

```swift
let user = User.mock()
```

–ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:

```
card  ‚Üí 4831 9023 1142 7784
phone ‚Üí +998 93 542 19 08
code  ‚Üí QWE 42
```

---

## 6. `MaskPattern` ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –º–∞—Å–∫–∏

```swift
public enum MaskPattern {
    case cardNumber
    case cardExpiry
    case date
    case phoneUZ
    case pinflUZ
    case passportUZ
    case pattern(String)
}
```

### –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –º–∞—Å–∫–∏

| –ú–∞—Å–∫–∞         | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ          | –ü—Ä–∏–º–µ—Ä           |
| ------------- | ------------------- | ---------------- |
| `.cardNumber` | –ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞    | `1234 5678 9012` |
| `.cardExpiry` | –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –∫–∞—Ä—Ç—ã | `08/29`          |
| `.date`       | –î–∞—Ç–∞                | `12-05-2024`     |
| `.phoneUZ`    | –¢–µ–ª–µ—Ñ–æ–Ω –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω–∞ | `+998 90 123 45` |
| `.pinflUZ`    | PINFL (14 —Ü–∏—Ñ—Ä)     | `12345678901234` |
| `.passportUZ` | –ü–∞—Å–ø–æ—Ä—Ç –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω–∞ | `AB1234567`      |

---

## 7. –ö–∞—Å—Ç–æ–º–Ω—ã–µ –º–∞—Å–∫–∏ (`.pattern(String)`)

–î–ª—è –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.pattern("‚Ä¶")`.

### –°–∏–º–≤–æ–ª—ã –º–∞—Å–∫–∏

| –°–∏–º–≤–æ–ª | –ó–Ω–∞—á–µ–Ω–∏–µ                  |
| -----: | ------------------------- |
|    `A` | –°–ª—É—á–∞–π–Ω–∞—è –ª–∞—Ç–∏–Ω—Å–∫–∞—è –±—É–∫–≤–∞ |
|    `X` | –°–ª—É—á–∞–π–Ω–∞—è —Ü–∏—Ñ—Ä–∞ (0‚Äì9)     |
| –¥—Ä—É–≥–æ–π | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å     |

### –ü—Ä–∏–º–µ—Ä—ã

```swift
@Mask(.pattern("AAA XXX"))
var code: String
```

```
QWE 482
```

```swift
@Mask(.pattern("AA-XX-XX"))
var ref: String
```

```
KD-49-03
```

---

## 8. –í–ª–æ–∂–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ —Å –º–∞—Å–∫–∞–º–∏

```swift
@Mockable
struct Payment {
    @Mask(.cardNumber)
    var card: String

    var amount: Int
}

let payment = Payment.mock()
```

---

## 9. –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–î–æ–±–∞–≤—å—Ç–µ –ø–∞–∫–µ—Ç –≤ `Package.swift`:

```swift
.package(
    url: "https://github.com/safinaelmirausa/mockableMacro",
    from: "1.0.0"
),
```

–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –∫ —Ç–∞—Ä–≥–µ—Ç—É:

```swift
.target(
    name: "YourApp",
    dependencies: ["MockableClient"]
)
```

---

## 10. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è |
| --------- | ------------------ |
| Swift     | 6.0                |
| Xcode     | 16.0               |
| macOS     | 13.0               |

---

## 11. –°—Ü–µ–Ω–∞—Ä–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

* SwiftUI Preview
* Unit-—Ç–µ—Å—Ç—ã
* Snapshot-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
* UI-–¥–µ–º–æ –∏ offline-—Ä–µ–∂–∏–º—ã
* –ë—ã—Å—Ç—Ä–æ–µ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## 12. –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

* –ú–∏–Ω–∏–º—É–º boilerplate-–∫–æ–¥–∞
* –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ `@Mask`
* –†–∞—Å—à–∏—Ä—è–µ–º–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
* –û—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è Preview –∏ —Ç–µ—Å—Ç–æ–≤
